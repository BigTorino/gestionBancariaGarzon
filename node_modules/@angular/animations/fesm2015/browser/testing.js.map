{"version":3,"file":"testing.js","sources":["../../../../../../packages/animations/browser/testing/src/mock_animation_driver.ts","../../../../../../packages/animations/browser/testing/src/testing.ts","../../../../../../packages/animations/browser/testing/public_api.ts","../../../../../../packages/animations/browser/testing/index.ts","../../../../../../packages/animations/browser/testing/testing.ts"],"names":["validateStyleProperty","matchesElement","containsElement","invokeQuery","allowPreviousPlayerStylesMerge"],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nimport {AnimationPlayer, AUTO_STYLE, NoopAnimationPlayer, ɵStyleData} from '@angular/animations';\nimport {AnimationDriver, ɵallowPreviousPlayerStylesMerge as allowPreviousPlayerStylesMerge, ɵcontainsElement as containsElement, ɵinvokeQuery as invokeQuery, ɵmatchesElement as matchesElement, ɵvalidateStyleProperty as validateStyleProperty} from '@angular/animations/browser';\n\n\n/**\n * @publicApi\n */\nexport class MockAnimationDriver implements AnimationDriver {\n  static log: AnimationPlayer[] = [];\n\n  validateStyleProperty(prop: string): boolean {\n    return validateStyleProperty(prop);\n  }\n\n  matchesElement(element: any, selector: string): boolean {\n    return matchesElement(element, selector);\n  }\n\n  containsElement(elm1: any, elm2: any): boolean {\n    return containsElement(elm1, elm2);\n  }\n\n  query(element: any, selector: string, multi: boolean): any[] {\n    return invokeQuery(element, selector, multi);\n  }\n\n  computeStyle(element: any, prop: string, defaultValue?: string): string {\n    return defaultValue || '';\n  }\n\n  animate(\n      element: any, keyframes: {[key: string]: string|number}[], duration: number, delay: number,\n      easing: string, previousPlayers: any[] = []): MockAnimationPlayer {\n    const player =\n        new MockAnimationPlayer(element, keyframes, duration, delay, easing, previousPlayers);\n    MockAnimationDriver.log.push(<AnimationPlayer>player);\n    return player;\n  }\n}\n\n/**\n * @publicApi\n */\nexport class MockAnimationPlayer extends NoopAnimationPlayer {\n  private __finished = false;\n  private __started = false;\n  public previousStyles: {[key: string]: string|number} = {};\n  private _onInitFns: (() => any)[] = [];\n  public currentSnapshot: ɵStyleData = {};\n\n  constructor(\n      public element: any, public keyframes: {[key: string]: string|number}[],\n      public duration: number, public delay: number, public easing: string,\n      public previousPlayers: any[]) {\n    super(duration, delay);\n\n    if (allowPreviousPlayerStylesMerge(duration, delay)) {\n      previousPlayers.forEach(player => {\n        if (player instanceof MockAnimationPlayer) {\n          const styles = player.currentSnapshot;\n          Object.keys(styles).forEach(prop => this.previousStyles[prop] = styles[prop]);\n        }\n      });\n    }\n  }\n\n  /* @internal */\n  onInit(fn: () => any) {\n    this._onInitFns.push(fn);\n  }\n\n  /* @internal */\n  init() {\n    super.init();\n    this._onInitFns.forEach(fn => fn());\n    this._onInitFns = [];\n  }\n\n  finish(): void {\n    super.finish();\n    this.__finished = true;\n  }\n\n  destroy(): void {\n    super.destroy();\n    this.__finished = true;\n  }\n\n  /* @internal */\n  triggerMicrotask() {}\n\n  play(): void {\n    super.play();\n    this.__started = true;\n  }\n\n  hasStarted() {\n    return this.__started;\n  }\n\n  beforeDestroy() {\n    const captures: ɵStyleData = {};\n\n    Object.keys(this.previousStyles).forEach(prop => {\n      captures[prop] = this.previousStyles[prop];\n    });\n\n    if (this.hasStarted()) {\n      // when assembling the captured styles, it's important that\n      // we build the keyframe styles in the following order:\n      // {other styles within keyframes, ... previousStyles }\n      this.keyframes.forEach(kf => {\n        Object.keys(kf).forEach(prop => {\n          if (prop != 'offset') {\n            captures[prop] = this.__finished ? kf[prop] : AUTO_STYLE;\n          }\n        });\n      });\n    }\n\n    this.currentSnapshot = captures;\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nexport {MockAnimationDriver, MockAnimationPlayer} from './mock_animation_driver';\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @module\n * @description\n * Entry point for all public APIs of this package.\n */\nexport * from './src/testing';\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n// This file is not used to build this module. It is only used during editing\n// by the TypeScript language service and during build for verifcation. `ngc`\n// replaces this file with production index.ts when it rewrites private symbol\n// names.\n\nexport * from './public_api';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"]}